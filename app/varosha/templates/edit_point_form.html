{% load i18n static %}

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="{% static 'css/add_point_form.css' %}">
</head>
<form id="edit-point-form" action="{% url 'edit-point-form' point_form.instance.id %}" method="post" class="styled-form">
    {% csrf_token %}
    <div class="form-row"  style="display:none;">
        {{ point_form.id }}{{ point_form.x }}{{ point_form.y }}
    </div>
    <div class="form-row">
        {{ point_form.name }}
    </div>

    <!--  Notes Section -->

    <!-- Display Existing Notes -->
    {% if existing_notes %}
    <div class="existing-notes">
        {% for note in existing_notes %}
        <div class="note">
            <p>{{ note.text }}</p>
            <!-- Optional: Add delete button -->
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!--  Media Section -->

    {% if existing_media  %}
        <div class="media-thumbnails-container"><div class="media-thumbnails">';
            {% for media in existing_media  %}
                <div class="media-thumbnail"><a class="popup-image" href="{{media.src}}"><img src="{{media.src}}" width="100" height="100"></a></div>';
            {% endfor %}
        </div>
    {% endif %}
</form>
    <div class="media-upload-section">
        <form id="media-upload-form-{{point_form.instance.id}}" enctype="multipart/form-data">
            <input type="hidden" name="point" value="{{point_form.instance.id}}">
            <label for="file-{{point_form.instance.id}}">{% translate "Add photo:" %}</label>
            <input type="file" name="file" id="file-{{point_form.instance.id}}" accept="image/*,video/*">
            <button type="button" onclick="uploadMedia({{point_form.instance.id}})">{% translate "Upload" %}</button>
        </form>
        <div id="upload-status-{{point_form.instance.id}}"></div>
        <div id="media-preview-{{point_form.instance.id}}" class="media-thumbnail"></div>
    </div>



    <button type="submit" class="submit-button" form="edit-point-form">{% translate "Save" %}</button>
